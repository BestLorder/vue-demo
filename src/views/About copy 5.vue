<!--
 * @Descripttion: 
 * @Author: Lorder
 * @Date: 2019-12-05 16:21:22
 * @LastEditors  : Lorder
 * @LastEditTime : 2020-01-03 13:24:50
 -->
<template>
  <div class="about">
    <div class="canvasBox">
      <img
        src="https://qnunion.feierlaiedu.com/kcschool/qnRLyEMIzFQTbccrTfyN35lAYYM84vQD"
        alt=""
        class="ppt"
      />

      <canvas id="canvas" width="1343" height="782"></canvas>
    </div>
  </div>
</template>
<script>
export default {
  data() {
    return {};
  },
  created() {
    // const loading = this.$loading();
    // setTimeout(() => {
    //   loading.close();
    // }, 3000);
    console.log(this.$route);
    // this.$router.push({ name: "about", params: { name: "aa", age: 17 } });
  },
  mounted() {
    // let res =
    //   "me_1573647468950_d57|16711680|4|1|M,503.14,414.45,M,503.14,414.45,C,503.13,414.46,502.17,415.42,C,501.2,416.39,502.17,419.28,C,503.13,422.17,504.1,424.1,C,505.06,426.02,506.02,428.92,C,506.99,431.81,508.92,433.73,C,510.84,435.66,510.84,436.63,C,510.84,437.59,511.81,439.52,C,512.77,441.45,514.7,443.37,C,516.63,445.3,517.59,446.27,C,518.55,447.23,519.52,448.19,C,520.48,449.16,528.19,449.16,C,535.9,449.16,548.43,446.27,C,560.96,443.37,564.82,440.48,C,568.67,437.59,569.64,436.63,C,570.6,435.66,571.57,434.7,C,572.53,433.73,572.53,430.84,C,572.53,427.95,573.49,426.99,C,574.46,426.02,576.39,422.17,C,578.31,418.31,580.24,416.39,C,582.17,414.46,584.1,411.57,C,586.02,408.67,586.99,406.75,C,587.95,404.82,588.92,402.89,C,589.88,400.96,590.84,397.11,C,591.81,393.25,592.77,390.36,C,593.73,387.47,593.73,385.54,C,593.73,383.61,593.73,382.65,C,593.73,381.69,593.73,380.72,C,593.73,379.76,593.73,378.8,C,593.73,377.83,593.73,376.87,C,593.73,375.9,593.73,373.98,C,593.73,372.05,593.73,371.08,C,593.73,370.12,593.73,369.16,C,593.73,368.19,593.73,366.27,C,593.73,364.34,592.77,364.34,C,591.81,364.34,590.84,362.41,C,589.88,360.48,587.95,359.52,C,586.02,358.55,585.06,357.59,C,584.1,356.63,584.1,355.66,C,584.1,354.7,583.13,353.73,C,582.17,352.77,581.2,352.77,C,580.24,352.77,579.28,351.81,C,578.31,350.84,576.39,349.88,C,574.46,348.92,572.53,348.92,C,570.6,348.92,569.64,348.92,C,568.67,348.92,567.71,348.92,C,566.75,348.92,564.82,348.92,C,562.89,348.92,556.14,348.92,C,549.4,348.92,546.51,347.95,C,543.61,346.99,542.65,346.99,C,541.69,346.99,538.8,346.99,C,535.9,346.99,534.94,346.02,C,533.98,345.06,528.19,345.06,C,522.41,345.06,520.48,345.06,C,518.55,345.06,516.63,345.06,C,514.7,345.06,512.77,345.06,C,510.84,345.06,508.92,345.06,C,506.99,345.06,506.02,345.06,C,505.06,345.06,504.1,345.06,C,503.13,345.06,502.17,345.06,C,501.2,345.06,499.28,345.06,C,497.35,345.06,495.42,345.06,C,493.49,345.06,491.57,345.06,C,489.64,345.06,487.71,345.06,C,485.78,345.06,483.86,345.06,C,481.93,345.06,480,345.06,C,478.07,345.06,476.14,345.06,C,474.22,345.06,472.29,345.06,C,470.36,345.06,469.4,345.06,C,468.43,345.06,466.51,345.06,C,464.58,345.06,462.65,345.06,C,460.72,345.06,459.76,346.02,C,458.8,346.99,457.83,347.95,C,456.87,348.92,456.87,349.88,C,456.87,350.84,455.9,351.81,C,454.94,352.77,454.94,353.73,C,454.94,354.7,454.94,355.66,C,454.94,356.63,454.94,359.52,C,454.94,362.41,453.98,363.37,C,453.01,364.34,453.01,365.3,C,453.01,366.27,453.01,367.23,C,453.01,368.19,452.05,370.12,C,451.08,372.05,451.08,373.01,C,451.08,373.98,450.12,375.9,C,449.16,377.83,449.16,379.76,C,449.16,381.69,449.16,382.65,C,449.16,383.61,453.98,391.33,C,458.8,399.04,460.72,400,C,462.65,400.96,466.51,402.89,C,470.36,404.82,471.33,404.82,C,472.29,404.82,473.25,405.78,C,474.22,406.75,475.18,406.75,C,476.14,406.75,478.07,406.75,C,480,406.75,482.89,407.71,C,485.78,408.67,486.75,408.67,C,487.71,408.67,488.67,408.67,C,489.64,408.67,491.57,409.64,C,493.49,410.6,494.46,410.6,C,495.42,410.6,496.39,410.6,C,497.35,410.6,498.31,410.6,C,499.28,410.6,500.24,410.6,C,501.2,410.6,502.17,411.57,C,503.13,412.53,504.1,412.53,C,505.06,412.53,506.02,412.53,C,506.99,412.53,508.92,412.53,C,510.84,412.53,511.81,412.53,C,512.77,412.53,513.73,413.49,L,514.7,414.46|1";
    // let data_4 = res.split("|")[4];
    // let data = data_4.split("C,");
    // console.log(this.getColor(res.split("|")[1]));
    // var arr = [];
    // data.map(item => {
    //   console.log(item);
    //   item = item.split(",");
    //   let obj = {};
    //   obj.x = item[0];
    //   obj.y = item[1];
    //   obj.archX = item[2];
    //   obj.archY = item[3];
    //   arr.push(obj);
    //   return item;
    // });
    // console.log(arr);
    // var c = document.getElementById("canvas");
    // var ctx = c.getContext("2d");
    // ctx.lineWidth = 1;
    // ctx.strokeStyle = this.getColor(res.split("|")[1]);
    // ctx.lineCap = "round";
    // let piece = arr;
    // for (var i = 0; i < piece.length; i++) {
    //   ctx.beginPath();
    //   ctx.moveTo(piece[i].startX, piece[i].startY);
    //   ctx.lineTo(piece[i].endX, piece[i].endY);
    //   ctx.stroke();
    // }
    let a = this.drawSerialize(1, {
      c:
        "me_1573647511153_d71|16711680|4|1|M,316.14,749.88,M,316.14,749.88,C,316.14,749.88,326.75,749.88,C,337.35,749.88,345.06,752.77,C,352.77,755.66,361.45,755.66,C,370.12,755.66,377.83,757.59,C,385.54,759.52,395.18,760.48,C,404.82,761.45,415.42,763.37,C,426.02,765.3,435.66,766.27,C,445.3,767.23,457.83,772.05,C,470.36,776.87,480,776.87,C,489.64,776.87,495.42,777.83,C,501.2,778.8,507.95,779.76,C,514.7,780.72,517.59,782.65,C,520.48,784.58,523.37,784.58,C,526.27,784.58,529.16,784.58,C,532.05,784.58,533.98,784.58,C,535.9,784.58,540.72,784.58,C,545.54,784.58,549.4,784.58,C,553.25,784.58,558.07,784.58,C,562.89,784.58,566.75,784.58,C,570.6,784.58,575.42,784.58,C,580.24,784.58,586.02,784.58,C,591.81,784.58,599.52,784.58,C,607.23,784.58,613.01,784.58,C,618.8,784.58,625.54,785.54,C,632.29,786.51,638.07,787.47,C,643.86,788.43,650.6,789.4,C,657.35,790.36,663.13,790.36,C,668.92,790.36,672.77,790.36,C,676.63,790.36,682.41,790.36,C,688.19,790.36,693.01,790.36,C,697.83,790.36,701.69,790.36,C,705.54,790.36,725.78,790.36,C,746.02,790.36,753.73,790.36,C,761.45,790.36,771.08,790.36,C,780.72,790.36,788.43,790.36,C,796.14,790.36,804.82,790.36,C,813.49,790.36,823.13,788.43,C,832.77,786.51,839.52,784.58,C,846.27,782.65,854.94,776.87,C,863.61,771.08,869.4,769.16,C,875.18,767.23,881.93,763.37,C,888.67,759.52,892.53,757.59,C,896.39,755.66,901.2,752.77,C,906.02,749.88,911.81,746.02,C,917.59,742.17,920.48,738.31,C,923.37,734.46,925.3,732.53,C,927.23,730.6,932.05,728.67,C,936.87,726.75,938.8,726.75,C,940.72,726.75,942.65,724.82,C,944.58,722.89,945.54,722.89,C,946.51,722.89,948.43,721.93,C,950.36,720.96,951.33,720,C,952.29,719.04,935.9,679.52,C,919.52,640,918.55,639.04,C,917.59,638.07,915.66,636.14,C,913.73,634.22,911.81,633.25,C,909.88,632.29,906.02,630.36,C,902.17,628.43,899.28,625.54,C,896.39,622.65,894.46,620.72,C,892.53,618.8,887.71,617.83,C,882.89,616.87,880,616.87,C,877.11,616.87,871.33,614.94,C,865.54,613.01,861.69,610.12,C,857.83,607.23,854.94,607.23,C,852.05,607.23,850.12,606.27,C,848.19,605.3,844.34,604.34,C,840.48,603.37,835.66,602.41,C,830.84,601.45,826.02,600.48,C,821.2,599.52,818.31,598.55,C,815.42,597.59,813.49,596.63,C,811.57,595.66,808.67,595.66,C,805.78,595.66,799.04,592.77,C,792.29,589.88,789.4,588.92,C,786.51,587.95,782.65,587.95,C,778.8,587.95,774.94,587.95,C,771.08,587.95,767.23,586.99,C,763.37,586.02,754.7,585.06,C,746.02,584.1,742.17,582.17,C,738.31,580.24,733.49,579.28,C,728.67,578.31,720.96,578.31,C,713.25,578.31,707.47,577.35,C,701.69,576.39,694.94,576.39,C,688.19,576.39,684.34,575.42,C,680.48,574.46,674.7,574.46,C,668.92,574.46,664.1,574.46,C,659.28,574.46,651.57,574.46,C,643.86,574.46,636.14,574.46,C,628.43,574.46,617.83,574.46,C,607.23,574.46,602.41,574.46,C,597.59,574.46,591.81,574.46,C,586.02,574.46,570.6,574.46,C,555.18,574.46,550.36,571.57,C,545.54,568.67,540.72,568.67,C,535.9,568.67,530.12,567.71,C,524.34,566.75,521.45,566.75,C,518.55,566.75,514.7,566.75,C,510.84,566.75,505.06,566.75,C,499.28,566.75,479.04,566.75,C,458.8,566.75,453.01,566.75,C,447.23,566.75,442.41,566.75,C,437.59,566.75,433.73,567.71,C,429.88,568.67,423.13,568.67,C,416.39,568.67,412.53,568.67,C,408.67,568.67,405.78,568.67,C,402.89,568.67,399.04,568.67,C,395.18,568.67,388.43,568.67,C,381.69,568.67,378.8,568.67,C,375.9,568.67,371.08,568.67,C,366.27,568.67,364.34,568.67,C,362.41,568.67,356.63,568.67,C,350.84,568.67,345.06,568.67,C,339.28,568.67,329.64,568.67,C,320,568.67,316.14,568.67,C,312.29,568.67,308.43,568.67,C,304.58,568.67,299.76,568.67,C,294.94,568.67,291.08,568.67,C,287.23,568.67,281.45,568.67,C,275.66,568.67,267.95,568.67,C,260.24,568.67,244.82,568.67,C,229.4,568.67,222.65,570.6,C,215.9,572.53,208.19,573.49,C,200.48,574.46,193.73,575.42,C,186.99,576.39,183.13,576.39,C,179.28,576.39,174.46,578.31,C,169.64,580.24,166.75,580.24,C,163.86,580.24,158.07,581.2,C,152.29,582.17,147.47,582.17,C,142.65,582.17,139.76,583.13,C,136.87,584.1,133.98,584.1,C,131.08,584.1,125.3,584.1,C,119.52,584.1,116.63,584.1,C,113.73,584.1,106.99,585.06,C,100.24,586.02,96.39,586.02,C,92.53,586.02,87.71,586.99,C,82.89,587.95,80,588.92,C,77.11,589.88,76.14,589.88,C,75.18,589.88,73.25,589.88,C,71.33,589.88,69.4,590.84,C,67.47,591.81,66.51,592.77,C,65.54,593.73,65.54,594.7,C,65.54,595.66,64.58,596.63,C,63.61,597.59,61.69,598.55,C,59.76,599.52,58.8,601.45,C,57.83,603.37,53.01,607.23,C,48.19,611.08,47.23,612.05,C,46.27,613.01,44.34,614.94,C,42.41,616.87,41.45,619.76,C,40.48,622.65,39.52,625.54,C,38.55,628.43,38.55,631.33,C,38.55,634.22,37.59,636.14,C,36.63,638.07,36.63,640,C,36.63,641.93,36.63,644.82,C,36.63,647.71,82.89,680.48,C,129.16,713.25,135.9,714.22,C,142.65,715.18,153.25,716.14,C,163.86,717.11,174.46,718.07,C,185.06,719.04,187.95,719.04,C,190.84,719.04,196.63,719.04,C,202.41,719.04,205.3,719.04,C,208.19,719.04,210.12,720,C,212.05,720.96,213.98,720.96,C,215.9,720.96,217.83,720.96,C,219.76,720.96,222.65,720.96,C,225.54,720.96,226.51,720.96,C,227.47,720.96,230.36,720.96,C,233.25,720.96,236.14,721.93,C,239.04,722.89,240.96,722.89,C,242.89,722.89,247.71,722.89,C,252.53,722.89,255.42,722.89,C,258.31,722.89,260.24,722.89,C,262.17,722.89,264.1,722.89,C,266.02,722.89,270.84,722.89,C,275.66,722.89,277.59,722.89,C,279.52,722.89,282.41,723.86,C,285.3,724.82,288.19,724.82,C,291.08,724.82,293.98,724.82,C,296.87,724.82,299.76,724.82,C,302.65,724.82,304.58,724.82,C,306.51,724.82,310.36,724.82,C,314.22,724.82,321.93,726.75,C,329.64,728.67,331.57,728.67,C,333.49,728.67,336.39,728.67,C,339.28,728.67,343.13,728.67,C,346.99,728.67,350.84,729.64,C,354.7,730.6,358.55,730.6,C,362.41,730.6,365.3,731.57,C,368.19,732.53,372.05,732.53,C,375.9,732.53,376.87,732.53,C,377.83,732.53,381.69,732.53,C,385.54,732.53,388.43,732.53,C,391.33,732.53,393.25,732.53,C,395.18,732.53,396.14,732.53,C,397.11,732.53,398.07,732.53,L,399.04,732.53|1",
      n: 72,
      p: 21,
      st: 1140.4,
      t: 25,
      x: "112256324"
    });
    console.log(a);
    var c = document.getElementById("canvas");
    var ctx = c.getContext("2d");
    ctx.lineWidth = 4;
    // ctx.strokeStyle = a.color;
    ctx.lineCap = "round";
    let piece = a.graph.data;
    // let piece = arr;
    // let b=3.5813
    let b = 1;
    // for (var i = 0; i < piece.length; i++) {
    //   ctx.beginPath();
    //   ctx.moveTo(piece[i].x / b + 27, piece[i].y / b - 90);
    //   ctx.lineTo(piece[i].archX / b + 27, piece[i].archY / b - 90);
    //   ctx.stroke();
    // }
    // var lineIndex = 0,
    //   pointIndex = 0,
    //   line2;
    var i = 0;
    function drawBegin() {
      ctx.beginPath();
      // pointIndex = 0;
      var intervalHandle = window.setInterval(function() {
        if (i < piece.length) {
          i++;
        } else {
          clearInterval(intervalHandle);
        }

        ctx.moveTo(piece[i].x / b + 27, piece[i].y / b - 90);
        ctx.lineTo(piece[i].archX / b + 27, piece[i].archY / b - 90);
        if (piece[i + 1]) {
          ctx.lineTo(piece[i + 1].archX / b + 27, piece[i + 1].archY / b - 90);
        }

        ctx.stroke();
      }, 50);
    }
    drawBegin();
  },
  methods: {
    drawSerialize: function(t, e) {
      var A = 1;
      var i = 1,
        n = i,
        r = e.c,
        o = {},
        s = r.split("|"),
        a = s[0],
        c = this.getColor(s[1]),
        l = s[2] * i,
        u = s[3] == A ? !0 : !1,
        h = s[4],
        f = h.split(","),
        d = { lineStyle: { thickness: l, color: c }, moveTo: {}, data: [] },
        p = 0;
      console.log(i);
      console.log(h);
      console.log(f);
      "M" === f[0] && ((d.moveTo = { x: f[1] * i, y: f[2] * n }), (p = 3));
      for (var g = {}; p < f.length; )
        switch (f[p]) {
          case "M":
            (g = {
              name: f[p],
              x: parseInt(f[p + 1]) * i,
              y: parseInt(f[p + 2]) * n
            }),
              d.data.push(g),
              (p += 3);
            break;
          case "L":
            (g = {
              name: f[p],
              x: parseInt(f[p + 1]) * i,
              y: parseInt(f[p + 2]) * n
            }),
              d.data.push(g),
              (p += 3);
            break;
          case "C":
            (g = {
              name: f[p],
              x: parseInt(f[p + 1]) * i,
              y: parseInt(f[p + 2]) * n,
              archX: parseInt(f[p + 3]) * i,
              archY: parseInt(f[p + 4]) * n
            }),
              d.data.push(g),
              (p += 5);
        }
      return (o = {
        objectId: a,
        color: c,
        thickness: l,
        visible: u,
        graph: d
      });
    },
    scaleX: function(t, e) {
      return this.isWhiteBoard(e)
        ? t.width / this.whiteBoardWidth
        : t.width / this.drawWidth;
    },
    isWhiteBoard: function(t) {
      return t > 1e4 ? !0 : !1;
    },
    getColor: function(t) {
      var t = parseInt(t);
      if (((t = t.toString(16)), t.length < 6)) {
        var e = 6 - t.length;
        for (i = 0; e > i; i++) t = "0" + t;
      }
      return (t = "#" + t);
    }
  }
};
</script>
<style lang="less" scoped>
.ppt {
  width: 1343px;
  display: block;
}
.canvasBox {
  position: relative;
}
#canvas {
  // transform: scale(1/3.58);
  position: absolute;
  left: 0;
  top: 0;
}
</style>
